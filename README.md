# Wallet-Service
Wallet-Service — это REST API для управления балансами кошельков, поддерживающий операции депозита, вывода средств и получения баланса.

## Функциональность

Все операции с кошельками управляются через HTTP API запросы:

- **Создание кошелька**: Кошелек создается автоматически, если при попытке депозита не был найден кошелек с указанным UUID. В случае его отсутствия создается новый кошелек, а указанная при попытке депозита сумма сразу зачисляется счет.
- **Депозит**: Пополнение кошелька на заданную сумму. При отсутствии кошелька с указанным UUID он будет создан с заданной суммой автоматически.
- **Вывод средств**: Снятие средств с кошелька с проверкой на достаточность средств. В случае недостаточности средств возвращается ошибка.
- **Получение баланса**: Запрос текущего баланса кошелька.
- **Обработка ошибок**: Реализация обработки различных ошибок, например, при недостаточности средств на кошельке, отсутствии кошелька в базе данных, ошибках базы данных и др.


## Технологии

- **Go 1.23**: Основной язык программирования для разработки сервисов.
- **Gin**: Веб-фреймворк для построения RESTful API.
- **PostgreSQL 17.2**: Система управления базами данных для хранения информации о кошельках и транзакциях.
- **Viper**: Для удобной работы с конфигурационными файлами.
- **Docker**: Для контейнеризации приложения и запуска в изолированном окружении.
- **Logrus**: Логгер для записи и отслеживания событий и ошибок в сервисе.
- **Golang-migrate**: Инструмент для управления миграциями базы данных.
- **Postman**: Для ручного тестирования HTTP-ручек.
- **Testify**: Библиотека для написания тестов.
- **GoMock**: Для создания моков.

## Примеры запросов

### POST DEPOSIT http://localhost:8080/api/v1/wallet
Body:
    json
{
    "walletId":"4255f2d0-5dbe-4ab3-8301-e786cae230d3",
    "operationType":"DEPOSIT",
    "amount":1000
}

### POST WITHDRAW http://localhost:8080/api/v1/wallet
Body:
    json
{
    "walletId":"4255f2d0-5dbe-4ab3-8301-e786cae230d3",
    "operationType":"WITHDRAW",
    "amount":1000
}

### GET http://localhost:8080/api/v1/wallets/d7af0768-704e-4f1c-9793-a44c2d1f9b75

## Запуск проекта

Для того чтобы запустить проект, вам нужно скачать репозиторий и использовать Docker для создания и запуска всех необходимых контейнеров.

### 1. Клонировать репозиторий

Сначала клонируйте репозиторий на ваш локальный компьютер:

```bash
git clone https://github.com/Arissiel/wallet-service
```

### 2. Переменные окружения

В проекте уже есть файл .env, который содержит все необходимые переменные для работы приложения (например, для подключения к базе данных и другие параметры).

### 3. Собрать и запустить проект с Docker

Проект уже настроен с использованием Docker и Docker Compose. Для того чтобы запустить его, выполните следующие команды:

```bash
docker compose up --build
```

